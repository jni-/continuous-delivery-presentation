<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Livraison continue</title>

    <meta name="description" content="Un présentation de la livraison continue et de son rôle dans l'agilité">
    <meta name="author" content="Jni">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/reveal.min.css">
    <link rel="stylesheet" href="css/theme/default.css" id="theme">
    <link rel="stylesheet" href="lib/css/zenburn.css">
    <link rel="stylesheet" href="css/mine.css" />

    <script>
      function linkToCss(cssFile) {
        var link = document.createElement( 'link' );
        link.rel = 'stylesheet';
        link.type = 'text/css';
        link.href = cssFile;
        document.getElementsByTagName( 'head' )[0].appendChild( link );
      }

      if( window.location.search.match( /print-pdf/gi ) ) {
        linkToCss("css/print/pdf.css");
        linkToCss("css/print/mine.css");
      }
    </script>

    <!--[if lt IE 9]>
      <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div id="logo-live-feedback">
      <img src="images/logo-live-feedback.png" width="25px" /> http://live-feedback.net
    </div>

    <div id="logo-elapse">
      <img src="images/logo-elapse.png" width="200px" />
    </div>

    <div id="twitter">
      <img src="images/twitter.png" width="25px" /> @jni_viens <br /> #ElapseAT14
    </div>

    <div id="github">
      <img src="images/github.png" width="25px" /> jni-
    </div>

    <div id="states">
      <div class="state" id="state-1">1</div>
      <div class="state" id="state-2">2</div>
      <div class="state" id="state-3">3</div>
      <div class="state" id="state-4">4</div>
      <div class="state" id="state-5">5</div>
      <div class="state" id="state-6">6</div>
    </div>

    <div class="reveal">

      <div class="slides">
        <section>
          <h2>Utilisez votre téléphone ou autre pour accéder à ce site</h2>
          <h2><a href="http://live-feedback.net">http://live-feedback.<u>net</u></a></h2>
        </section>

        <section>
          <h1>Livraison continue</h1>
          <h3>Une mise en production à chaque <a href="#">heure</a> de la journée</h3>
          <aside class="notes">
            + Me présenter
          </aside>
        </section>

        <section>
          <h2>Les fameuses mise en production...</h2>
          <p>Est-ce tout simplement "cowboy"?</p>
          <aside class="notes">
            Questions : <br />
            - Qui a déjà fait une MEP? La nuit? La fds? <br />
            - Qui aime ça? <br />
            - Qui a confiance que ça ne plantera pas? <br />
            - MEP OK sur staging, mais plante en prod? <br />
          </aside>
        </section>

        <section>
          <h2>Tenons-nous au courant!</h2>
          <p><a href="http://live-feedback.net">http://live-feedback.net</a></p>
          <aside class="notes">
            Faire la mise en prod
          </aside>
        </section>

        <section>
          <section>
            <h2>Qu'est-ce qu'on vient de réaliser?</h2>
            <p class="fragment roll-in">On s'est donné les moyens de faire de la livraison continue!</p>
          </section>

          <section id="global-diagram">
            <h2>Qu'est-ce que la livraison continue?</h2>
            <p class="fragment fade-out"></p>
            <p class="fragment current-visible"><img src="images/diagramme-global-ci.png" /></p>
            <p class="fragment current-visible"><img src="images/diagramme-global-sans-prod.png" /></p>
            <p class="fragment current-visible"><img src="images/diagramme-global-total.png" /></p>
            <p class="fragment current-visible"><img src="images/diagramme-global-continuous-delivery.png" /></p>
          </section>


          <section>
            <h2>Qui serait assez confiant pour faire une mise en production lors d'une présentation?</h2>
            <p>Pourquoi?</p>
            <aside class="notes">
              Annectode : chez Etsy tu dois faire une MEP la première journée. - http://codeascraft.com/2011/02/04/how-does-etsy-manage-development-and-operations/ <br />
              Ne pas dire tout suite l'argument du bus factor, juste confiance, facilité, etc
            </aside>
          </section>

          <section>
            <h2>Une mise en production, c'est un marathon</h2>
          </section>

        </section>


        <section data-state="current-state-1">
          <section>
            <h2>Étape 1</h2>
            <p>Tout doit être dans le contrôle de source</p>
            <aside class="notes">
              Montrer le repo sur github
            </aside>
          </section>

          <section>
            <h2>La configuration</h2>
            <p>Des serveurs, des environnements de développement, etc.</p>
            <aside class="notes">
              NE PAS Montrer mon env. de dev.
            </aside>
          </section>

          <section>
            <h2>La base de données</h2>
            <p>Ou les migrations nécessaires</p>
            <aside class="notes">
              Sujet vaste, on en reparlera...
            </aside>
          </section>

          <section>
            <h2>Le code</h2>
            <p>Ça semble évident, mais absolument tout doit y être : cronjob, services, etc.</p>
          </section>

          <section>
            <h2>Tout ceci est incrémental!</h2>
            <aside class="notes">
              FB a tout centralisé... méga hg, mais c'est OK - https://code.facebook.com/posts/218678814984400/scaling-mercurial-at-facebook/
            </aside>
          </section>

          <section>
            <h2>Tout ceci est testable!</h2>
            <aside class="notes">
              Par exemple: chef, puppet <br />
              Les migrations ça se test
            </aside>
          </section>
        </section>

        <section data-state="current-state-2">
          <section>
            <h2>Étape 2</h2>
            <p>Configuration des environnements</p>
          </section>

          <section>
            <h2>Un environnement de développement toujours prêt</h2>
            <aside class="notes">
              Demander combien de temps ça prend setter un nouvel employé. <br />
              Démontrer mon env de dev
            </aside>
          </section>

          <section>
            <h2>Les modifications directement sur le serveur</h2>
            <p>La pire gaffe à faire!</p>
            <aside class="notes">
              Bien sûr OK si ta compagnie saigne de l'argent. <br />
              Sinon: pas rejouable, pas "hardened by time", erreur humaine, perd la trace. <br />
              Doc word d'installation VS script
            </aside>
          </section>

          <section>
            <h2>Docker</h2>
            <p>Un conteneur pour tout le monde</p>
            <aside class="notes">
              Contient tous les outils pour rouler le site <br />
              Évidement pas la seule solution
            </aside>
          </section>
        </section>

        <section data-state="current-state-3">
          <section>
            <h2>Étape 3</h2>
            <p>Les tests doivent pouvoir s'exécuter facilement</p>
            <aside class="notes">
              Faire rouler les tests
            </aside>
          </section>

          <section>
            <h2>À éviter</h2>
            <blockquote>Pour faire passer le test X tu as besoin d'installer Y... fait juste l'ignorer.</blockquote>
          </section>

          <section>
            <h2>Du feedback rapide et continu</h2>
            <p>Qui provient du même environnement que la prod!</p>
            <aside class="notes">
              Faire échouer les tests <br />
              Expliquer la différence entre ./test.sh quick || ./test.sh
            </aside>
          </section>
        </section>

        <section data-state="current-state-4">
          <section>
            <h2>Étape 4</h2>
            <p>Publier un et un seul paquet pour les installations</p>
          </section>

          <section>
            <h2>Avec docker</h2>
            <p>Une nouvelle image pour chaque version!</p>
          </section>

          <section>
            <h2>Améliorer l'ensemble</h2>
            <p>Merge fréquents et résultat cohérent</p>
            <aside class="notes">
              Pas le choxi que tout le monde soit inclus <br />
              Quitte à avoir des features partielles et cachées (feature switch)
            </aside>
          </section>
        </section>

        <section data-state="current-state-5">
          <section>
            <h2>Étape 5</h2>
            <p>Un déploiement <a href="#">simple</a> et rapide</p>
          </section>

          <section>
            <h2>Déployez tôt et souvent</h2>
            <p>Ne faites pas l'erreur de vous dire "c'est trop simple pour l'instant"</p>
            <aside class="notes">
              Confiance <br />
              Hardened <br />
              Pas de trucs apres 10 ans "ups, ouin, faudrait ca la...", comme les tests
            </aside>
          </section>

          <section>
            <h2>Évitez les erreurs humaines</h2>
            <p>Et réduisez votre "bus factor"</p>
            <aside class="notes">
              Etsy encore... pas de chance d'avoir personne pour un deploiement, tout le monde est capable!
            </aside>
          </section>

          <section>
            <h2>Déployer n'importe où</h2>
            <aside class="notes">
              Déployer sur staging.
            </aside>
          </section>

          <section>
            <h2>Le "release train" de SAFe</h2>
            <aside class="notes">
              Passe souvent = pas de presse / rush de fin de version <br />
              Se combine bien avec feature switch
            </aside>
          </section>

          <section>
            <h2>Obtenez du feedback plus rapide et fréquent</h2>
          </section>

          <section>
            <h2>Déployez de petits morceaux chaque fois</h2>
          </section>

          <section>
            <h2>Prévoyez les problèmes: pratiquez les "rollback"</h2>
            <aside class="notes">
              Comme dit la communauté d'Erlang: "plan for failure". Ça vaut pour tout.
            </aside>
          </section>
        </section>

        <section data-state="current-state-6">
          <section>
            <h2>Étape 6</h2>
            <p>Déploiement sans interruption</p>
          </section>

          <section>
            <h2>En 5-10 secondes, on a</h2>
            <ul>
              <li>Mis à jour l'image Docker</li>
              <li>Démarré l'application dans le nouveau conteneur, en parallèle de l'ancien</li>
              <li>Fait des tests pour voir que tout est beau (health check)</li>
              <li>Mis à jour la configuration du proxy</li>
              <li>Envoyé un message au site pour aviser de la mise à jour (broadcast)</li>
              <li>Mis en attente toutes les connexions au serveur</li>
              <li>Rechargé la configuration du proxy</li>
              <li>Réouvert les connexions</li>
          </section>

          <section>
            <h2>Ce n'est pas seulement pour les mises en production</h2>
            <p>Augmente souvent la résilience du produit</p>
          </section>
        </section>

        <section data-state"current-state-6">
          <section>
            <h2>Les fameuses mise en production...</h2>
            <p>Est-ce tout simplement "cowboy"?</p>
          </section>

          <section>
            <h2>Interessés?</h2>
            <p>Commencez tranquillement à tout automatiser, ne prennez pas de trop grosses bouchées!</p>
          </section>

          <section>
            <h2>Restez Lean</h2>
            <p>Est-ce nécessaire d'avoir aucune interruption?</p>
          </section>

          <section>
            <h2>Votre client vous en remerciera</h2>
            <p>Arrêtons d'être le goulot d'étranglement</p>
          </section>

          <section>
            <h2>Évidement, pas besoin d'être aussi fou!</h2>
            <p>Il existe des outils pour .NET, java, etc.</p>
            <aside class="notes">
              .NET : octopus deploy <br />
              Autre : jenkins, go, snapCI, etc
            </aside>
          </section>

          <section>
            <h2>Il reste également la question de la base de données...</h2>
            <p class="fragment roll-in">Malheureusement, on devra se reprendre!</p>
          </section>

        </section>

      </div>

    </div>

    <script src="lib/js/head.min.js"></script>
    <script src="js/reveal.min.js"></script>

    <script>

    Reveal.initialize({
      controls: true,
      progress: true,
      history: true,
      center: true,

      theme: "default",
      transition: 'concave',

      dependencies: [
        { src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
        { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
        { src: 'plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
        { src: 'plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
      ]
    });

    </script>

  </body>
</html>
